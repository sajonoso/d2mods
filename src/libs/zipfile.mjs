import z from"node:zlib";var M="";(function(){let E=console.log,N=r=>z?z.deflateRawSync(r):M.deflate(r,{raw:!0}),Z=r=>z?z.inflateRawSync(r):M.inflate(r,{raw:!0}),d=30,g=67324752,F=10,$=0,I=8,m={signature:[0,4],version:[4,2],gp_flags:[6,2],comp_method:[8,2],mod_time:[10,2],mod_date:[12,2],crc32:[14,4],comp_size:[18,4],uncomp_size:[22,4],filename_size:[26,2],xfield_size:[28,2],filename:[30,-1],xfield:[-30,-1]},u=46,y=33639248,_={signature:[0,4],version:[4,2],version_min:[6,2],gp_flags:[8,2],comp_method:[10,2],mod_time:[12,2],mod_date:[14,2],crc32:[16,4],comp_size:[20,4],uncomp_size:[24,4],filename_size:[28,2],xfield_size:[30,2],comment_size:[32,2],disk_num:[34,2],int_attrib:[36,2],ext_attrib:[38,4],rel_offset:[42,4],filename:[46,-1],xfield:[-47,-1],comment:[-48,-1]},W=22,w=101010256,p={signature:[0,4],disk_num:[4,2],cd_start_num:[6,2],num_cd_disk:[8,2],num_cd_total:[10,2],cd_size:[12,4],cd_start_offset:[16,4],comment_size:[20,2],comment:[22,-1]},D=(r,c,f)=>r.slice(c,c+f),T=(r,c,f)=>new TextDecoder().decode(D(r,c,f)),S=(r,c)=>(r[c+1]<<8|r[c])>>>0,x=(r,c)=>(r[c+3]<<24|r[c+2]<<16|r[c+1]<<8|r[c])>>>0,G=(r,c,f)=>{for(var a=0;a<f.length;a++)r[c+a]=f[a]&255},B=(r,c,f)=>{for(var a=0;a<f.length;a++)r[c+a]=f.charCodeAt(a)&255},k=(r,c,f)=>{r[c+1]=f>>8&255,r[c]=f&255},R=(r,c,f)=>{r[c+3]=f>>24&255,r[c+2]=f>>16&255,r[c+1]=f>>8&255,r[c]=f&255},P=function(){let r=[],c;for(let f=0;f<256;f++){c=f;for(let a=0;a<8;a++)c=c&1?3988292384^c>>>1:c>>>1;r[f]=c}return r}(),H=r=>{for(var c=-1,f=0;f<r.length;f++)c=c>>>8^P[(c^r[f])&255];return(c^-1)>>>0};function C(){this.instanceType="",this.state={buf:[],cdBuf:[],filenames:[],file_count:0,compressMethod:0,locked:!1};let r=(e,s)=>{let t={},n=[],i=0,o=0;if(e.length<s+d)return null;for(let l of Object.keys(m)){if(l==="xfield"){let O=t.filename_size||0;i=s+d+O,o=t.xfield_size,n=o?e.slice(i,i+o):new Uint8Array([])}else l==="filename"?(i=s+d,o=t.filename_size||0,n=o?T(e,i,o):""):(i=s+m[l][0],o=m[l][1],o==2?n=S(e,i):o==4?n=x(e,i):n=e[i]);t[l]=n}return t},c=e=>d+e.filename_size+e.xfield_size+e.comp_size,f=(e,s)=>{let t=!1,n=e.buf;if(n.length===0)return;let i=0,o=r(n,i);for(;o!==null&&o.signature===g;){if(t=s(o,n,i),t||(i=i+c(o),o=r(n,i),o===null))return"";if(o.signature!==g)return"Error: Bad Zip file"}return""},a=(e,s,t)=>{let n=D(e,s+d+t.filename_size+t.xfield_size,t.comp_size),o=t.comp_method===0?n:Z(n);return{info:q(t),content:o}},b=e=>{let s=(e>>9&127)+1980,t=e>>5&15,n=e&31;return`${s}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`},L=e=>{let s=e>>11&31,t=e>>5&63,n=(e&31)*2;return`${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},A=(e,s)=>{let t={},n=[],i=0,o=0;for(let l of Object.keys(_))l==="xfield"?(i=s+u+t.filename_size,o=t.xfield_size,n=e.slice(i,i+o)):l==="comment"?(i=s+u+t.filename_size+t.xfield_size,o=t.comment_size,n=e.slice(i,i+o)):l==="filename"?(i=s+u,o=t.filename_size,n=T(e,i,o)):(i=s+_[l][0],o=_[l][1],o==2?n=S(e,i):o==4?n=x(e,i):n=e[i]),t[l]=n;return t},V=e=>u+e.filename_size+e.xfield_size+e.comment_size,Y=(e,s)=>{let t={},n=[],i=0,o=0;for(let l of Object.keys(p))l==="comment"?(i=s+W,o=t.comment_size,n=e.slice(i,i+o)):(i=s+p[l][0],o=p[l][1],o==2?n=S(e,i):o==4?n=x(e,i):n=e[i]),t[l]=n;return t},q=e=>({...e,signature:"0x"+e.signature.toString(16),crc32:"0x"+e.crc32.toString(16),mod_date:b(e.mod_date),mod_time:L(e.mod_time)}),J=(e,s)=>{let t=s,n=r(e,t);for(;n!==null&&n.signature===g;)t=t+c(n),n=r(e,t);return n===null||n.signature!==y?-1:t},K=e=>({...e,signature:"0x"+e.signature.toString(16),version:"0x"+e.version.toString(16),version_min:"0x"+e.version_min.toString(16),crc32:"0x"+e.crc32.toString(16),mod_date:b(e.mod_date),mod_time:L(e.mod_time)});this.open=e=>this.instanceType.length!==0?"ERROR: another zip file already open":(this.state.buf=e,this.instanceType="R",""),this.listCDFiles=()=>{if(this.instanceType!=="R")return"ERROR: zip file not opened for reading";let e=[],s=this.state.buf,t=0;if(t=J(s,t),t<=0)return E("ERROR: unexpected central directory signature "+t),[];let n=A(s,t);for(;n.signature===y;)e.push(K(n)),t=t+V(n),n=A(s,t);if(n.signature!==w)return E("ERROR: unexpected eocd signature"),[];let i=Y(s,t),o={...i,signature:"0x"+i.signature.toString(16)};return e.push(o),e},this.listFiles=()=>{if(this.instanceType!=="R")return"ERROR: zip file not opened for reading";let e=[];return f(this.state,function(s,t,n){e.push(s)}),e},this.getFile=e=>{if(this.instanceType!=="R")return"ERROR: zip file not opened for reading";let s=null;return f(this.state,function(t,n,i){if(t.filename===e)return s=a(n,i,t),!0}),s};let Q=e=>{let[s,t,n]=e.split(":").map(Number);return s<<11|t<<5|n/2},X=e=>{let[s,t,n]=e.split("-").map(Number);return s-1980<<9|t<<5|n},ee=(e,s,t)=>{let n=new Array(d+s.filename_size+t.length),i=0,o=0;for(let l of Object.keys(m))l==="filename"?B(n,d,s.filename):l==="xfield"||(i=m[l][0],o=m[l][1],o===2?k(n,i,s[l]):o===4?R(n,i,s[l]):n[i]=s[l]);G(n,d+s.filename_size,t),e.buf=e.buf.concat(n)},te=(e,s)=>{let t=new Array(u+s.filename_size),n=Object.assign({},s);n.signature=y,n.version_min=F,n.comment_size=0,n.disk_num=0,n.int_attrib=0,n.ext_attrib=0,n.rel_offset=e.buf.length,n.comment="";let i=0,o=0;for(let l of Object.keys(_))l==="filename"?B(t,u,s.filename):l==="xfield"||l==="comment"||(i=_[l][0],o=_[l][1],o===2?k(t,i,n[l]):o===4?R(t,i,n[l]):t[i]=n[l]);e.cdBuf=e.cdBuf.concat(t)},U=(e,s)=>{let t=s.name,n=s.content,i=e.compressMethod===0,o=new Date,l=o.toUTCString().split(" ")[4],O=`${o.getUTCFullYear()}-${o.getUTCMonth()+1}-${o.getUTCDate()}`,h=n,v=i?[]:new Uint8Array(N(n)),j={signature:g,version:F,gp_flags:0,comp_method:i?$:I,mod_time:Q(l),mod_date:X(O),crc32:H(h),comp_size:i?h.length:v.length,uncomp_size:h.length,filename_size:t.length,xfield_size:0,filename:t,xfield:[]};te(e,j),ee(e,j,i?h:v),e.filenames.push(t)},ne=(e,s)=>{let t=0,n=0;for(let i of Object.keys(p))i==="comment"||(t=p[i][0],n=p[i][1],n===2?k(e,t,s[i]):n===4?R(e,t,s[i]):e[t]=s[i])},ie=e=>{let s=new Array,t={signature:w,disk_num:0,cd_start_num:0,num_cd_disk:e.file_count,num_cd_total:e.file_count,cd_size:e.cdBuf.length,cd_start_offset:e.buf.length,comment_size:0,comment:""};ne(s,t),e.buf=e.buf.concat(e.cdBuf),e.buf=e.buf.concat(s)},se=e=>{e.locked=!0,ie(e)},oe=(e,s)=>{e.filenames.indexOf(s)>=0||(U(e,{name:s,content:new Uint8Array([])}),e.file_count=e.file_count+1)},re=(e,s)=>{let t=s.split("/");if(t.length>1)for(let n=1;n<t.length;n++){let i=t.slice(0,n).join("/");oe(e,i+"/")}};this.create=e=>this.instanceType.length!==0?"ERROR: can not create when zipfile already open":this.state.file_count>0?"ERROR: can not create when files already added":(this.instanceType="W",this.state={buf:[],cdBuf:[],filenames:[],file_count:0,compressMethod:e||0,locked:!1},""),this.addFile=(e,s)=>{if(this.instanceType!=="W")return"ERROR: zip file not opened for writing";let t=this.state;return t.closed?"ERROR: can not add any more files, zip file is locked":(e.indexOf("/")>0&&re(t,e),U(t,{name:e,content:s}),t.file_count=t.file_count+1,"")},this.lock=()=>{let e=this.state;return e.file_count===0?"ERROR: can not lock an empty archive":(se(e),"")},this.getZip=()=>this.state.locked?new Uint8Array(this.state.buf):"ERROR: zip archive is not locked",this.close=()=>{let e=this.state,s=e.compressMethod;e.file_count>1&&e.locked&&(e.buf=null,e.cdBuf=null,e.filenames=null,this.state=null),this.state={buf:[],cdBuf:[],filenames:[],file_count:0,compressMethod:s,locked:!1},this.instanceType=""}}typeof window<"u"?window.ZipFile=C:typeof global<"u"&&(global.ZipFile=C)})();
